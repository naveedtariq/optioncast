var FormWizard=function(){var e=$("#wizard"),r=$("#form"),a=function(){e.smartWizard({selected:0,keyNavigation:!1,onLeaveStep:l,onShowStep:s});i(),t()},i=function(e){("undefined"==typeof e||""==e)&&(e=1),numberOfSteps=$(".swMain > ul > li").length;var r=Math.floor(100/numberOfSteps*e);$(".step-bar").css("width",r+"%")},t=function(){$.validator.addMethod("cardExpiry",function(){return""!=$("#card_expiry_mm").val()&&""!=$("#card_expiry_yyyy").val()?!0:!1},"Please select a month and year"),$.validator.setDefaults({errorElement:"span",errorClass:"help-block",errorPlacement:function(e,r){"radio"==r.attr("type")||"checkbox"==r.attr("type")?e.insertAfter($(r).closest(".form-group").children("div").children().last()):"card_expiry_mm"==r.attr("name")||"card_expiry_yyyy"==r.attr("name")?e.appendTo($(r).closest(".form-group").children("div")):e.insertAfter(r)},ignore:":hidden",rules:{username:{minlength:2,required:!0},email:{required:!0,email:!0},password:{minlength:6,required:!0},password_again:{required:!0,minlength:5,equalTo:"#password"},full_name:{required:!0,minlength:2},phone:{required:!0},gender:{required:!0},address:{required:!0},city:{required:!0},country:{required:!0},card_name:{required:!0},card_number:{minlength:16,maxlength:16,required:!0},card_cvc:{digits:!0,required:!0,minlength:3,maxlength:4},card_expiry_yyyy:"cardExpiry",payment:{required:!0,minlength:1}},messages:{firstname:"Please specify your first name"},highlight:function(e){$(e).closest(".help-block").removeClass("valid"),$(e).closest(".form-group").removeClass("has-success").addClass("has-error").find(".symbol").removeClass("ok").addClass("required")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e,r){e.addClass("help-block valid"),$(r).closest(".form-group").removeClass("has-error").addClass("has-success").find(".symbol").removeClass("required").addClass("ok")}})},n=function(){$(".display-value",form).each(function(){var e=$('[name="'+$(this).attr("data-display")+'"]',form);"text"==e.attr("type")||"email"==e.attr("type")||e.is("textarea")?$(this).html(e.val()):e.is("select")?$(this).html(e.find("option:selected").text()):e.is(":radio")||e.is(":checkbox")?$(this).html(e.filter(":checked").closest("label").text()):"card_expiry"==$(this).attr("data-display")&&$(this).html($('[name="card_expiry_mm"]',form).val()+"/"+$('[name="card_expiry_yyyy"]',form).val())})},s=function(r,a){$(".next-step").unbind("click").click(function(r){r.preventDefault(),e.smartWizard("goForward")}),$(".back-step").unbind("click").click(function(r){r.preventDefault(),e.smartWizard("goBackward")}),$(".finish-step").unbind("click").click(function(e){e.preventDefault(),d(r,a)})},l=function(e,r){return o(r.fromStep,r.toStep)},d=function(){c()&&(alert("form submit function"),$(".anchor").children("li").last().children("a").removeClass("wait").removeClass("selected").addClass("done"))},o=function(e,a){var t=!1;return numberOfSteps>a&&a>e?r.valid()?(r.validate().focusInvalid(),$(".anchor").children("li:nth-child("+e+")").children("a").removeClass("wait"),i(a),t=!0,!0):void 0:e>a?($(".anchor").children("li:nth-child("+e+")").children("a").addClass("wait"),i(a),!0):($(".anchor").children("li:nth-child("+e+")").children("a").removeClass("wait"),n(),i(a),!0)},c=function(){var e=!0;return e};return{init:function(){a()}}}();